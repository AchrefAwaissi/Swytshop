{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"D:\\\\ynov2\\\\Swytshop\\\\store\\\\GlobalState.js\";\nimport { createContext, useReducer, useEffect } from \"react\";\nimport reducers from './Reducers';\nimport { getData } from '../utils/fetchData';\nexport const DataContext = /*#__PURE__*/createContext();\nexport const DataProvider = ({\n  children\n}) => {\n  const initialState = {\n    notify: {},\n    auth: {}\n  };\n  const {\n    0: state,\n    1: dispatch\n  } = useReducer(reducers, initialState);\n  useEffect(() => {\n    const firstLogin = localStorage.getItem(\"firstLogin\");\n\n    if (firstLogin) {\n      getData('auth/accessToken').then(res => {\n        if (res.err) return localStorage.removeItem(\"firstLogin\");\n        dispatch({\n          type: \"AUTH\",\n          payload: {\n            token: res.access_token,\n            user: res.user\n          }\n        });\n      });\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(DataContext.Provider, {\n    value: {\n      state,\n      dispatch\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 5\n  }, this);\n};","map":{"version":3,"sources":["D:/ynov2/Swytshop/store/GlobalState.js"],"names":["createContext","useReducer","useEffect","reducers","getData","DataContext","DataProvider","children","initialState","notify","auth","state","dispatch","firstLogin","localStorage","getItem","then","res","err","removeItem","type","payload","token","access_token","user"],"mappings":";;AAAA,SAASA,aAAT,EAAuBC,UAAvB,EAAkCC,SAAlC,QAAkD,OAAlD;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,SAAQC,OAAR,QAAsB,oBAAtB;AAEA,OAAO,MAAMC,WAAW,gBAAGL,aAAa,EAAjC;AAEP,OAAO,MAAMM,YAAY,GAAG,CAAC;AAACC,EAAAA;AAAD,CAAD,KAAe;AAC3C,QAAMC,YAAY,GAAG;AAACC,IAAAA,MAAM,EAAE,EAAT;AAAaC,IAAAA,IAAI,EAAE;AAAnB,GAArB;AACA,QAAM;AAAA,OAACC,KAAD;AAAA,OAAOC;AAAP,MAAmBX,UAAU,CAACE,QAAD,EAAWK,YAAX,CAAnC;AAGAN,EAAAA,SAAS,CAAE,MAAM;AACb,UAAMW,UAAU,GAAGC,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAnB;;AACA,QAAIF,UAAJ,EAAe;AACXT,MAAAA,OAAO,CAAE,kBAAF,CAAP,CAA6BY,IAA7B,CAAkCC,GAAG,IAAG;AACpC,YAAGA,GAAG,CAACC,GAAP,EAAY,OAAOJ,YAAY,CAACK,UAAb,CAAwB,YAAxB,CAAP;AACZP,QAAAA,QAAQ,CAAC;AACLQ,UAAAA,IAAI,EAAE,MADD;AAELC,UAAAA,OAAO,EAAE;AACLC,YAAAA,KAAK,EAAEL,GAAG,CAACM,YADN;AAELC,YAAAA,IAAI,EAAEP,GAAG,CAACO;AAFL;AAFJ,SAAD,CAAR;AAOH,OATD;AAWH;AACJ,GAfQ,EAeP,EAfO,CAAT;AAiBI,sBACA,QAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAE;AAACb,MAAAA,KAAD;AAAQC,MAAAA;AAAR,KAA7B;AAAA,cACKL;AADL;AAAA;AAAA;AAAA;AAAA,UADA;AAKH,CA3BM","sourcesContent":["import { createContext,useReducer,useEffect} from \"react\";\r\nimport reducers from './Reducers'\r\nimport {getData} from '../utils/fetchData'\r\n\r\nexport const DataContext = createContext()\r\n\r\nexport const DataProvider = ({children}) =>{\r\nconst initialState = {notify: {}, auth: {} }\r\nconst [state,dispatch] = useReducer(reducers, initialState)\r\n\r\n\r\nuseEffect (() => {\r\n    const firstLogin = localStorage.getItem(\"firstLogin\");\r\n    if (firstLogin){\r\n        getData ('auth/accessToken').then(res =>{\r\n            if(res.err) return localStorage.removeItem(\"firstLogin\")\r\n            dispatch({\r\n                type: \"AUTH\",\r\n                payload: {\r\n                    token: res.access_token,\r\n                    user: res.user\r\n                }\r\n            })\r\n        })\r\n\r\n    }\r\n},[])\r\n\r\n    return(\r\n    <DataContext.Provider value={{state, dispatch}}>\r\n        {children}\r\n    </DataContext.Provider>\r\n)\r\n}"]},"metadata":{},"sourceType":"module"}