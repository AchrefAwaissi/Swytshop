{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\ynov2\\\\Swytshop\\\\store\\\\GlobalState.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { createContext, useReducer, useEffect } from \"react\";\nimport reducers from './Reducers';\nimport { getData } from '../utils/fetchData';\nexport var DataContext = /*#__PURE__*/createContext();\nexport var DataProvider = function DataProvider(_ref) {\n  _s();\n\n  var children = _ref.children;\n  var initialState = {\n    notify: {},\n    auth: {}\n  };\n\n  var _useReducer = useReducer(reducers, initialState),\n      state = _useReducer[0],\n      dispatch = _useReducer[1];\n\n  useEffect(function () {\n    var firstLogin = localStorage.getItem(\"firstLogin\");\n\n    if (firstLogin) {\n      getData('auth/accessToken').then(function (res) {\n        if (res.err) return localStorage.removeItem(\"firstLogin\");\n        dispatch({\n          type: \"AUTH\",\n          payload: {\n            token: res.access_token,\n            user: res.user\n          }\n        });\n      });\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(DataContext.Provider, {\n    value: {\n      state: state,\n      dispatch: dispatch\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(DataProvider, \"gZZ3TaNWFnk5pxLxmdKGLDXNo7Y=\");\n\n_c = DataProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"DataProvider\");","map":{"version":3,"sources":["D:/ynov2/Swytshop/store/GlobalState.js"],"names":["createContext","useReducer","useEffect","reducers","getData","DataContext","DataProvider","children","initialState","notify","auth","state","dispatch","firstLogin","localStorage","getItem","then","res","err","removeItem","type","payload","token","access_token","user"],"mappings":";;;;;;AAAA,SAASA,aAAT,EAAuBC,UAAvB,EAAkCC,SAAlC,QAAkD,OAAlD;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,SAAQC,OAAR,QAAsB,oBAAtB;AAEA,OAAO,IAAMC,WAAW,gBAAGL,aAAa,EAAjC;AAEP,OAAO,IAAMM,YAAY,GAAG,SAAfA,YAAe,OAAe;AAAA;;AAAA,MAAbC,QAAa,QAAbA,QAAa;AAC3C,MAAMC,YAAY,GAAG;AAACC,IAAAA,MAAM,EAAE,EAAT;AAAaC,IAAAA,IAAI,EAAE;AAAnB,GAArB;;AAD2C,oBAElBT,UAAU,CAACE,QAAD,EAAWK,YAAX,CAFQ;AAAA,MAEpCG,KAFoC;AAAA,MAE9BC,QAF8B;;AAK3CV,EAAAA,SAAS,CAAE,YAAM;AACb,QAAMW,UAAU,GAAGC,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAnB;;AACA,QAAIF,UAAJ,EAAe;AACXT,MAAAA,OAAO,CAAE,kBAAF,CAAP,CAA6BY,IAA7B,CAAkC,UAAAC,GAAG,EAAG;AACpC,YAAGA,GAAG,CAACC,GAAP,EAAY,OAAOJ,YAAY,CAACK,UAAb,CAAwB,YAAxB,CAAP;AACZP,QAAAA,QAAQ,CAAC;AACLQ,UAAAA,IAAI,EAAE,MADD;AAELC,UAAAA,OAAO,EAAE;AACLC,YAAAA,KAAK,EAAEL,GAAG,CAACM,YADN;AAELC,YAAAA,IAAI,EAAEP,GAAG,CAACO;AAFL;AAFJ,SAAD,CAAR;AAOH,OATD;AAWH;AACJ,GAfQ,EAeP,EAfO,CAAT;AAiBI,sBACA,QAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAE;AAACb,MAAAA,KAAK,EAALA,KAAD;AAAQC,MAAAA,QAAQ,EAARA;AAAR,KAA7B;AAAA,cACKL;AADL;AAAA;AAAA;AAAA;AAAA,WADA;AAKH,CA3BM;;GAAMD,Y;;KAAAA,Y","sourcesContent":["import { createContext,useReducer,useEffect} from \"react\";\r\nimport reducers from './Reducers'\r\nimport {getData} from '../utils/fetchData'\r\n\r\nexport const DataContext = createContext()\r\n\r\nexport const DataProvider = ({children}) =>{\r\nconst initialState = {notify: {}, auth: {} }\r\nconst [state,dispatch] = useReducer(reducers, initialState)\r\n\r\n\r\nuseEffect (() => {\r\n    const firstLogin = localStorage.getItem(\"firstLogin\");\r\n    if (firstLogin){\r\n        getData ('auth/accessToken').then(res =>{\r\n            if(res.err) return localStorage.removeItem(\"firstLogin\")\r\n            dispatch({\r\n                type: \"AUTH\",\r\n                payload: {\r\n                    token: res.access_token,\r\n                    user: res.user\r\n                }\r\n            })\r\n        })\r\n\r\n    }\r\n},[])\r\n\r\n    return(\r\n    <DataContext.Provider value={{state, dispatch}}>\r\n        {children}\r\n    </DataContext.Provider>\r\n)\r\n}"]},"metadata":{},"sourceType":"module"}